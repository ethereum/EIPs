<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  {% if page.layout == "eip" %}
    {% if page.category == "ERC" %}
      <title>ERC-{{ page.eip }}: {{ page.title | escape }}</title>
      <meta property="og:title" content="ERC-{{ page.eip }}: {{ page.title | escape }}" />
    {% else %}
      <title>EIP-{{ page.eip }}: {{ page.title | escape }}</title>
      <meta property="og:title" content="EIP-{{ page.eip }}: {{ page.title | escape }}" />
    {% endif %}
    <meta name="description" content="{{page.description | escape }}" />
    <meta property="og:description" content="{{page.description | escape }}" />
    <meta name="twitter:description" content="{{page.description | escape }}" />
  {% else %}
  <title>{{ page.title | escape }} | {{site.title}}</title>
    <meta
      property="og:title"
      content="{{ page.title | escape }} | {{site.title}}"
    />
    <meta name="description" content="{{site.description}}" />
    <meta property="og:description" content="{{site.description}}" />
    <meta name="twitter:description" content="{{site.description}}" />
  {% endif %}
  <meta name="generator" content="Jekyll" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="{{site.url}}{{page.url}}" />
  <meta property="og:url" content="{{site.url}}{{page.url}}" />
  <meta property="og:site_name" content="{{site.title}}" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@{{site.twitter_username}}" />
  <script type="application/ld+json">
    {
      "@type": "WebSite",
      "url": "{{site.url}}",
      "name": "{{site.title}}",
      "description": "{{site.description}}",
      "@context": "https://schema.org"
    }
  </script>
  <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}" />
  <link rel="icon" type="image/png" href="{{ '/assets/images/favicon.png' | relative_url }}" />
  {%- feed_meta -%}
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="{{ '/assets/css/override.css' | relative_url }}" />
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
      const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
      const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
    });
  </script>
  <script type="text/javascript">
    window.MathJax = {
      loader: {
        load: ['input/tex-base', 'output/chtml']
      },
      tex: {
        inlineMath: [['$', '$']],
        displayMath: [['$$', '$$']],
        processEscapes: true,
        processEnvironments: false,
        processRefs: false
      }
    };
  </script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js" integrity="sha384-/1zmJ1mBdfKIOnwPxpdG6yaRrxP6qu3eVYm0cz2nOx+AcL4d3AqEFrwcqGZVVroG" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/citation-js/0.6.7/citation.min.js" integrity="sha512-N+LDFMa9owHXGS+CyMrBvuxq2QuGl3fiB/7cys3aUEL7K6P1soHGqsS0sjHXZpwNd9Kz0m3R4IPy1HYRi6ROEQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script type="text/javascript">
    addEventListener('DOMContentLoaded', async () => {
      const Cite = window.require('citation-js');
      const citationElements = document.querySelectorAll('.language-csl-json');
      for (let citationElement of citationElements) {
        try {
          const citation = await Cite.async(citationElement);
          const template = document.createElement('template');
          template.innerHTML = citation.format('bibliography', {
            format: 'html',
            template: 'apa',
            lang: 'en-US'
          });
          if (citationElement.parentElement && citationElement.parentElement.matches('pre')) {
            citationElement.parentElement.replaceWith(template.content);
          } else {
            citationElement.replaceWith(template.content);
          }
        } catch (e) {
          console.error("unable to render citation", e);
        }
      }
    });
  </script>
  <script type="text/javascript">
    // EIP status filtering
    document.addEventListener('DOMContentLoaded', function() {
      var table = document.getElementById('eip-table');
      if (!table) return;

      function filterByStatus(status) {
        var rows = table.querySelectorAll('tbody tr');
        var visibleCount = 0;
        rows.forEach(function(row) {
          if (!status || row.getAttribute('data-status') === status) {
            row.classList.remove('hidden');
            visibleCount++;
          } else {
            row.classList.add('hidden');
          }
        });

        // Update active state on status links
        document.querySelectorAll('.status-link').forEach(function(link) {
          var linkStatus = link.getAttribute('data-status');
          if (linkStatus === status || (!status && linkStatus === '')) {
            link.classList.add('active');
          } else {
            link.classList.remove('active');
          }
        });

        // Show "No EIPs" message if filter returns no results
        var noResultsMsg = document.getElementById('no-results');
        if (visibleCount === 0) {
          table.style.display = 'none';
          if (!noResultsMsg) {
            noResultsMsg = document.createElement('p');
            noResultsMsg.id = 'no-results';
            noResultsMsg.textContent = 'No EIPs';
            noResultsMsg.className = 'no-results';
            table.parentNode.insertBefore(noResultsMsg, table.nextSibling);
          }
          noResultsMsg.style.display = '';
        } else {
          table.style.display = '';
          if (noResultsMsg) noResultsMsg.style.display = 'none';
        }
      }

      // Status definitions from EIP-1
      var statusInfo = {
        'living': {
          name: 'Living',
          description: 'A special status for EIPs that are designed to be continually updated and not reach a state of finality.'
        },
        'final': {
          name: 'Final',
          description: 'This EIP represents the final standard. A Final EIP exists in a state of finality and should only be updated to correct errata and add non-normative clarifications.'
        },
        'last-call': {
          name: 'Last Call',
          description: 'This is the final review window for an EIP before moving to Final. An EIP editor will assign Last Call status and set a review end date, typically 14 days later.'
        },
        'review': {
          name: 'Review',
          description: 'An EIP Author marks an EIP as ready for and requesting Peer Review.'
        },
        'draft': {
          name: 'Draft',
          description: 'The first formally tracked stage of an EIP in development. An EIP is merged by an EIP Editor into the EIP repository when properly formatted.'
        },
        'stagnant': {
          name: 'Stagnant',
          description: 'Any EIP in Draft, Review, or Last Call if inactive for a period of 6 months or greater is moved to Stagnant. An EIP may be resurrected from this state by Authors or EIP Editors.'
        },
        'withdrawn': {
          name: 'Withdrawn',
          description: 'The EIP Author(s) have withdrawn the proposed EIP. This state has finality and can no longer be resurrected using this EIP number.'
        }
      };

      // Map hash to status name
      function getStatusFromHash() {
        var hash = window.location.hash.slice(1);
        if (!hash) return '';
        var info = statusInfo[hash];
        return info ? info.name : '';
      }

      // Update status description
      function updateStatusDescription(hash) {
        var descEl = document.getElementById('status-description');
        var textEl = document.getElementById('status-description-text');
        if (!descEl || !textEl) return;

        var info = statusInfo[hash];
        if (info) {
          textEl.textContent = info.description;
          descEl.style.display = '';
        } else {
          descEl.style.display = 'none';
        }
      }

      // Apply filter on load
      var initialHash = window.location.hash.slice(1);
      filterByStatus(getStatusFromHash());
      updateStatusDescription(initialHash);

      // Apply filter on hash change
      window.addEventListener('hashchange', function() {
        var hash = window.location.hash.slice(1);
        filterByStatus(getStatusFromHash());
        updateStatusDescription(hash);
      });

      // Handle click on status links
      document.querySelectorAll('.status-link').forEach(function(link) {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          var status = this.getAttribute('data-status');
          if (status) {
            window.location.hash = status.toLowerCase().replace(' ', '-');
          } else {
            history.pushState('', document.title, window.location.pathname);
            filterByStatus('');
            updateStatusDescription('');
          }
        });
      });
    });
  </script>
</head>
