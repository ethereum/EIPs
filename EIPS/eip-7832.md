---
eip: 
title: Nostr Compatible Decentralized Event Based Social Post Standard with Multimedia Support and Editing
author: [Nick Juntilla] <nick@ownerfy.com>
discussions-to: https://github.com/ethereum/EIPs/issues/XXXX
status: Draft
type: Standards Track
category: ERC
created: 2024-12-15
requires: 721, 1155
---

## Simple Summary

This proposal defines a standardized format for representing decentralized social media posts as nfts. It is mainly designed to be compatible with the Nostr protocol, but is genericized here so that it can be easily adapted to AT protocol, used in other event based decentralized social media protocols, or even as an RSS feed. It is compatible with both ERC-721 and ERC-1155, and introduces a flexible model where the meaning of a post (original, reply, repost) is derived from its metadata rather than separate functions or event types. Replies have a reply tag, e, quotes will include the q tag, and so on. Additionally, it provides a mechanism to edit existing posts through an `editPost` function and an `EditPostEvent`. An edited post is to be seen as an updated version of a post.

## Abstract

This EIP defines a standardized way to create and manage NFTs that represent social media posts. These NFTs can be original posts, replies, reposts, or quote posts. The standard includes event emissions for these actions and specifies how to link replies to the original content using blockchain, smart contract, and token ID references.

This EIP introduces a standard that allows ERC-721 NFTs to encode Nostr event data. Each NFT encapsulates a single social media post as a Nostr-compatible event, including fields such as pubkey, content, kind, tags, and created_at. The NFT must be issued (minted) to the author's address first, ensuring the author controls and originates their own content. By adhering to the Nostr data structure, any NFT minted under this standard can be interpreted by Nostr clients, relays, or indexing services. Additionally, this standard defines how replies, reposts, and quotes should reference prior events, enabling rich social media interactions in a multi-chain, multi-contract environment.

We introduce a token standard (applicable to either ERC-721 or ERC-1155) for representing social media posts as Nostr events. By leveraging Nostr tags, posts can include multiple media files (images, audio, video) and external references (URLs, cross-chain references). A token minted under this standard can be integrated into a Nostr-based decentralized social ecosystem. Whether represented as a unique NFT (ERC-721) or a semi-fungible token (ERC-1155), the content remains interoperable and user-owned.

This standard defines how to:

Represent a social media post as an ERC-721 NFT that maps directly to a Nostr event.
Support multiple content types (text, images, audio, video) by referencing external resources through tags.
Enable linking to external content, such as URLs, blockchains, contracts, or other Nostr events.
Each NFT can be interpreted by Nostr clients and relays, enabling cross-ecosystem interoperability. Posts are "owned" by their creators and can incorporate replies, quotes, reposts, multimedia attachments, and external links.

We introduce a generic token standard to represent social media posts on-chain, allowing:

1. Representation as ERC-721 or ERC-1155 tokens.
2. A single posting mechanism: `createPost`.
3. Interpretation of post type (original, reply, repost) via the presence of certain tags in the metadata rather than separate functions or events.
4. The ability to edit previously published posts with an `editPost` function and corresponding `EditPostEvent`.
5. Multiple media attachments and external references through flexible tags.
6. NFT metadata aligned with common NFT practices to so existing NFT apps will display as much of the NFT as possible using the most common metadata structure.
7. By implementing a serparate public key and signature a third party may also publish a message on behalf of another user.

## Motivation

As social media becomes increasingly integrated with blockchain technology, there is a need for a standardized way to represent social media posts as NFTs. This standardization will facilitate the development of decentralized social media platforms, allowing users to own and control their content fully.

Nostr is a simple and flexible protocol for decentralized social media. By making NFTs Nostr-compatible, this EIP allows NFTs to become a fundamental building block for decentralized social platforms, ensuring that:

Interoperability: Content can be freely moved between Ethereum-based platforms and Nostr-based infrastructure.
Decentralized Identity and Ownership: Users maintain full ownership and control of their posts through their wallet keys.
Cross-Chain and Cross-Platform Referencing: A standardized tagging system enables referencing posts on other blockchains, other contracts, or even external URLs.

Nostr’s minimal and extensible protocol is ideal for decentralized identity and publishing. Integrating Nostr with ERC-721 NFTs ensures that users own their content while maintaining interoperability with Nostr clients. Supporting multimedia and external links allows richer content, making NFTs viable as building blocks for decentralized social networks, forums, classifieds, and multimedia platforms.

The proliferation of decentralized social platforms demands a standard that can represent a rich variety of posts as tokens. By defining a generic event-like structure, we enable:

Interoperability: Multiple platforms can rely on the same standard to read, write, and index posts.
Ownership and Portability: Users fully own their posts in their wallet as tokens.
Rich Content: Support for text, images, audio, video, and external links.
Cross-Platform Integration: A uniform structure that can integrate easily with various decentralized protocols, indexing services, and clients.

## Specification

### Post Structure

Each post includes:

- **id:** A unique, deterministic identifier for the post.
- **author:** The on-chain address of the post creator.
- **created_at:** Timestamp of creation (e.g., block timestamp at minting).
- **kind:** An integer representing the post category. This is expanded on below.
- **tags:** Arrays of arrays of strings that describe attachments, references, and other metadata. There are more example tags below as well as all possible Nostr tags.
  - For example, `["e", "<id_of_referenced_post>"]` indicates a reply.
  - `["m", "<media_url>", "<mime_type>"]` indicates attached media.
  - `["r", "<URL>"]` references an external URL.
  - `["ch", "<chain_id>"]`, `["c", "<contract_address>"]` for cross-chain/contract references.
- **content:** The textual content of the post.

Post Types (Examples)
Original Post: kind=1
Reply: kind=2 (or reuse kind=1 with reply-indicating tags)
Repost: kind=6 (for example)
Quote Post: Another distinct integer (e.g. 30023)
These are just example values. Different implementations may standardize on their own kind values or sets.

List of kinds https://github.com/nostr-protocol/nips?tab=readme-ov-file#event-kinds

Tags
tags is a flexible mechanism to attach additional structured data to a post. Some examples:

List of tags
https://github.com/nostr-protocol/nips?tab=readme-ov-file#standardized-tags

Media Attachments:
["m", "<media_url>", "<mime_type>"]
Multiple media can be attached by including multiple ["m", ...] tags.

References to Other Posts:
["e", "<id_of_referenced_post>"]

External URLs:
["r", "<URL>"]

Cross-Chain/Contract References:
["ch", "<chain_id>"], ["c", "<contract_address>"]

All these fields are stored in the NFT’s metadata under `properties`. The `description` field of the NFT is identical to `content`. The `name` field includes the author and optionally the platform, formatted as `"<author> via <platform> as Post"` or `"<author> as Post"` if no platform is specified.

### Token Standards Compatibility

- **ERC-721:** Each post is a unique NFT (`tokenId`).
- **ERC-1155:** A `tokenId` can represent one post event, potentially minted multiple times. The `id` ensures a unique reference to the event data.

### Events

#### PostEvent

When a new post is created:

```solidity
event PostEvent(
    address indexed author,
    uint256 indexed tokenId,
    bytes32 indexed id,
    uint256 created_at,
    bytes32 pubkey, // optional, may be the same as author
    uint32 kind, // optional
    string uri, // optional
    string name, // optional
    string content, // optional
    string tags, // optional, stringified tags
    sig // optional

);
```

Clients interpret whether a post is a reply or repost by examining tags.

EditPostEvent
When an existing post is edited:

```solidity
event EditPostEvent(
    address indexed editor,
    uint256 indexed tokenId,
    bytes32 indexed id,
    uint256 edited_at,
    bytes32 pubkey, // optional, may be the same as author
    uint32 kind, // optional
    string uri, // optional
    string name, // optional
    string content, // optional
    string tags, // optional, stringified tags
    sig // optional
);
```

EditPostEvent indicates that the specified post’s content and/or tags have changed. The contract must update the stored metadata for that token accordingly.

Metadata JSON

```
{
  "name": "<author> via <platform> as Publication",
  "description": "<arbitrary string should match the content>",
  "image": "https://example.com/thumbnail.jpg",
  "external_url": "<optional same as first reference url if it exists>"
  "properties": {
    "id": "<32-bytes lowercase hex-encoded sha256 of the serialized properties data>",
    "pubkey": "<32-bytes lowercase hex-encoded public key of the publicized creator>",
    "created_at": <unix timestamp in seconds>,
    "kind": <integer between 0 and 65535>,
    "tags": [
      ["e", "<id_of_referenced_post>"],
      ["m", "https://example.com/image1.jpg", "image/jpeg"],
      ["r", "https://example.com/external_resource"],
      [<arbitrary string>...]
    ],
    "content": "<optional if this key exists it must match description, else if only description is used then use the description as content>",
    "sig": "<64-bytes lowercase hex of the signature of the sha256 hash of the serialized properties data, which is the same as the "id" field>"
  }
}
```

To obtain the properties.id, we sha256 the serialized properties. The serialization is done over the UTF-8 JSON-serialized string (which is described below) of the following structure:

```
[
  0,
  <pubkey, as a lowercase hex string>,
  <created_at, as a number>,
  <kind, as a number>,
  <tags, as an array of arrays of non-null strings>,
  <content, as a string>
]
```

To prevent implementation differences from creating a different event ID for the same event, the following rules MUST be followed while serializing:

UTF-8 should be used for encoding.
Whitespace, line breaks or other unnecessary formatting should not be included in the output JSON.
The following characters in the content field must be escaped as shown, and all other characters must be included verbatim:
A line break (0x0A), use \n
A double quote (0x22), use \"
A backslash (0x5C), use \\
A carriage return (0x0D), use \r
A tab character (0x09), use \t
A backspace, (0x08), use \b
A form feed, (0x0C), use \f

Tags
Each tag is an array of one or more strings, with some conventions around them. Take a look at the example below:

```
{
  "tags": [
    ["e", "5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36", "wss://nostr.example.com"],
    ["p", "f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca"],
    ["a", "30023:f7234bd4c1394dda46d09f35bd384dd30cc552ad5541990f98844fb06676e9ca:abcd", "wss://nostr.example.com"],
    ["alt", "reply"],
    // ...
  ],
  // ...
}
```

The first element of the tag array is referred to as the tag name or key and the second as the tag value. So we can safely say that the event above has an e tag set to "5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36", an alt tag set to "reply" and so on. All elements after the second do not have a conventional name.

This NIP defines 3 standard tags that can be used across all event kinds with the same meaning. They are as follows:

The e tag, used to refer to an event: ["e", <32-bytes lowercase hex of the id of another event>, <recommended relay URL, optional>]
The p tag, used to refer to another user: ["p", <32-bytes lowercase hex of a pubkey>, <recommended relay URL, optional>]
The a tag, used to refer to an addressable or replaceable event
for an addressable event: ["a", <kind integer>:<32-bytes lowercase hex of a pubkey>:<d tag value>, <recommended relay URL, optional>]
for a normal replaceable event: ["a", <kind integer>:<32-bytes lowercase hex of a pubkey>:, <recommended relay URL, optional>]
As a convention, all single-letter (only english alphabet letters: a-z, A-Z) key tags are expected to be indexed by relays, such that it is possible, for example, to query or subscribe to events that reference the event "5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36" by using the {"#e": ["5c83da77af1dec6d7289834998ad7aafbd9e2191396d75ec3cc27f5a77226f36"]} filter. Only the first value in any given tag is indexed.

Kinds
Kinds specify how clients should interpret the meaning of each event and the other fields of each event (e.g. an "r" tag may have a meaning in an event of kind 1 and an entirely different meaning in an event of kind 10002). Each NIP may define the meaning of a set of kinds that weren't defined elsewhere. This NIP defines two basic kinds:

0: user metadata: the content is set to a stringified JSON object {name: <username>, about: <string>, picture: <url, string>} describing the user who created the event. Extra metadata fields may be set. A relay may delete older events once it gets a new one for the same pubkey.
1: text note: the content is set to the plaintext content of a note (anything the user wants to say). Content that must be parsed, such as Markdown and HTML, should not be used. Clients should also not parse content as those.

Refer to [NIP-01 Basic Event Kinds](https://github.com/nostr-protocol/nips/blob/master/01.md) for basic tags and kinds

Refer to https://github.com/nostr-protocol/nips/tree/master for more

Functions

```
function createPost(
    string memory content,
    string[][] memory tags,
    string memory authorIdentifier,
    string memory platform // optional
) public returns (uint256);

function editPost(
    uint256 tokenId,
    string memory newContent,
    string[][] memory newTags
) public;
```

createPost mints a new token. The authorIdentifier and optional platform form the name field.
editPost allows the author or an authorized party to modify content and tags. Must enforce access control.
Rationale
This design leverages a single event and function for creating posts. Post type determination occurs via metadata, making the standard adaptable to future social protocols or interpretations. The editPost function addresses a common need for updating published content.

Backwards Compatibility
This is an additive standard on top of ERC-721 and ERC-1155. Existing NFTs remain compatible; clients or platforms that understand this standard can interpret these tokens as social posts.

Test Cases
Original Post:
createPost without e tags. Check PostEvent and metadata.

Reply Post:
createPost with ["e", "<id_of_original_post>"] tag. Clients interpret it as a reply.

Multiple Media:
Add several ["m", ...] tags for multiple media files.

Editing a Post:
editPost changes content and/or adds new tags. Check EditPostEvent and updated metadata.

Security Considerations
Data Integrity:
Ensure that id (nostrId) is consistently derived, e.g., from metadata hash, to prevent forgeries.

Off-Chain Signatures:
The sig field in nostr_event is optional but recommended for Nostr authenticity. Off-chain signing by the author’s private key can be stored to improve trust.

Spam and Moderation:
Nostr and NFTs both allow permissionless creation of content. Platforms built on this standard should implement their own moderation layers, blocklists, or reputation systems.

Editing Control:
editPost must only be callable by the token owner or an authorized party.

Data Integrity:
id should be deterministic (e.g., hash of content and tags).

Spam & Moderation:
Out of scope. Platforms should implement moderation as needed.

References
ERC-721
ERC-1155
Nostr protocol
[NIP-01 Basic Event Kinds](https://github.com/nostr-protocol/nips/blob/master/01.md)
NIP-10 Replies and Mentions
NIP-18 Reposts
Copyright
This EIP is licensed under Apache-2.0.
